
# Transaction


## Content

### 1. [트랜잭션](./transaction.md)
- ACID
- 트랜잭션 격리 수준
- DB Lock 
### 2. [스프링 트랜잭션](./springTransaction.md)
- 서비스 계층은 순수하게 유지해야한다.
- [이전](./transaction.md)방식은 3가지 문제가 존재한다.
	1. 트랜잭션 문제
		- 트랜잭션 동기화 매니저를 사용한다.
	1. 예외 누수 문제 
		- 트랜잭션을 추상화 하여 사용한다.
	2. JDBC 반복 문제
		- 트랜잭션 템플릿을 사용한다.
### 3. [스프링 부트의 자동 리소스 등록](./autoRegister.md)


**선언적 트랜잭션 관리(Declarative Transaction Managerment)**
- `@Transactional` 애노테이션 하나만 선언해서 매우 편리하게 트랜잭션을 적용하는 것을 선언적 트랜잭션 관리라 한다.

**프로그래밍 방식의 트랜잭션 관리 (programming Transactional Management)**
- 트랜잭션 매니저 또는 트랜잭션 템플릿 등을 사용해서 트랜잭션 관련 코드를 직접 작성하는 것을 프로그래밍 방식의 트랜잭션 관리라 한다.
### Summary
1. 트랜잭션 적용 전
2. 트랜잭션 적용 후
	- 트랜잭션 문제, 예외 누수 문제, JDBC 반복 문제 발생
3. 트랜잭션을 추상화 하여 사용
	- 여전히 커넥션을 넘거야하는 불편함
4. 트랜잭션 동기화 매니저 사용
	- 동기화 매니저를 통해 커넥션을 파라미터로 넘기는 문제 해결
	- JDBC가 반복되는 문제가 남아있음
5. 트랜잭션 템플릿 사용
	- JDBC 반복 문제는 해결 했지만 여전히 서비스 계층이 트랜잭션을 담당하고 있음
	- 아직 단일 책임 원칙에 위배되는 문제가 있다
		- 비즈니스 로직과 트랜잭션을 서비스 계층이 둘다 담당하고 있다
6. 프록시 사용
	- 프록시를 통해 서비스 로직를 프록시를 거치게 만든다. `@Transactional`사용
	- 서비스 계층이 비즈니스 로직만 담당하게 되었다.

**아직 서비스 로직이 예외의 특정 기술에 의존하고 있다**
- 언체크드 예외로 바꾸기
	- 기존코드는 체크예외에 의존하고 있다. 이를 언체크드 예외로 바꿔서 의존 관계를 없애자



